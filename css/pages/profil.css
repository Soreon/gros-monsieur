/* ============================================================
   PROFIL ‚Äî Gros Monsieur
   Page profil / tableau de bord / r√©glages :
   en-t√™te profil, widgets dashboard, s√©lecteur de widgets,
   vue param√®tres compl√®te
   Depends on: css/variables.css, css/layout.css, css/components.css
   ============================================================ */


/* ============================================================
   1. EN-TETE PROFIL (.profile-header)
   Carte pleine largeur en haut de page : avatar + nom + badge
   ============================================================ */

/**
 * Carte principale de profil.
 * Background surface avec bordure, pas de bord gauche accent
 * (l'avatar joue le r√¥le d'ancre visuelle).
 */
.profile-header {
  background: var(--bg-surface);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  padding: var(--space-6) var(--space-4) var(--space-5);

  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--space-3);

  margin-bottom: var(--space-5);
  box-shadow: var(--shadow-sm);
  text-align: center;
}

/**
 * Cercle avatar 64px ‚Äî accent plein, initiales blanches en gras.
 * √âtend visuellement le composant .avatar de components.css mais
 * avec une taille sp√©cifique √† la page profil.
 */
.profile-avatar {
  width: 64px;
  height: 64px;
  border-radius: 50%;
  background: var(--accent);
  color: #fff;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: var(--text-xl);
  font-weight: var(--fw-bold);
  flex-shrink: 0;
  letter-spacing: -0.5px;
  box-shadow: 0 0 0 3px var(--accent-dim);
  overflow: hidden;
}

.profile-avatar img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

/* Nom affich√© sous l'avatar */
.profile-name {
  font-size: var(--text-xl);
  font-weight: var(--fw-bold);
  color: var(--text);
  letter-spacing: -0.3px;
  line-height: 1.2;
}

/**
 * Badge "üèÜ 42 s√©ances" ‚Äî pill accent-dim, ic√¥ne troph√©e + chiffre.
 * M√™me motif que .badge--accent de components.css mais taille md.
 */
.profile-workouts {
  display: inline-flex;
  align-items: center;
  gap: var(--space-1);
  padding: var(--space-1) var(--space-3);
  border-radius: var(--radius-full);
  background: var(--accent-dim);
  color: var(--accent);
  font-size: var(--text-sm);
  font-weight: var(--fw-semi);
  font-variant-numeric: tabular-nums;
}

.profile-workouts i {
  font-size: var(--text-xs);
  opacity: 0.85;
}


/* ============================================================
   2. SECTION TABLEAU DE BORD (.dashboard)
   En-t√™te titre + bouton ajout, liste de widget cards
   ============================================================ */

.dashboard {
  margin-bottom: var(--space-6);
}

/* Ligne flex : titre "Tableau de bord" + bouton "+" */
.dashboard__header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--space-3);
  margin-bottom: var(--space-3);
}

/* Titre de section (style coh√©rent avec .section-title de components.css) */
.dashboard__title {
  font-size: var(--text-xs);
  font-weight: var(--fw-semi);
  color: var(--text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.8px;
}

/* Bouton "+ Ajouter widget" ghost compact */
.dashboard__add-btn {
  display: inline-flex;
  align-items: center;
  gap: var(--space-1);
  padding: var(--space-1) var(--space-2);
  border-radius: var(--radius-sm);
  background: transparent;
  color: var(--accent);
  font-size: var(--text-sm);
  font-weight: var(--fw-semi);
  border: none;
  cursor: pointer;
  -webkit-tap-highlight-color: transparent;
  transition:
    background var(--duration-fast) var(--ease),
    color var(--duration-fast) var(--ease);
}

.dashboard__add-btn:hover { background: var(--accent-dim); }
.dashboard__add-btn:active { opacity: 0.7; }

/* Liste verticale de widget cards */
.dashboard__list {
  display: flex;
  flex-direction: column;
  gap: var(--space-3);
}

/**
 * √âtat vide dashboard ‚Äî r√©utilise le motif .empty-state de components.css.
 * Padding r√©duit pour ne pas surcharger la page.
 */
.dashboard__empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: var(--space-8) var(--space-4);
  text-align: center;
  gap: var(--space-2);
  color: var(--text-secondary);
  background: var(--bg-surface);
  border: 1px dashed var(--border-strong);
  border-radius: var(--radius-lg);
}

.dashboard__empty .empty-state__icon {
  font-size: 36px;
  opacity: 0.3;
  margin-bottom: var(--space-1);
}

.dashboard__empty .empty-state__title {
  font-size: var(--text-md);
  font-weight: var(--fw-semi);
  color: var(--text);
}

.dashboard__empty .empty-state__text {
  font-size: var(--text-sm);
  max-width: 220px;
}


/* ============================================================
   3. WIDGET CARDS (.widget-card)
   Carte avec bord gauche accent, header ic√¥ne + titre + bouton √ó
   ============================================================ */

/**
 * Carte widget ‚Äî m√™me motif bord gauche que .hist-card / .measure-card.
 * Position relative pour le bouton de suppression.
 */
.widget-card {
  position: relative;
  background: var(--bg-surface);
  border: 1px solid var(--border);
  border-left: 3px solid var(--accent);
  border-radius: var(--radius-md);
  padding: var(--space-3) var(--space-4);
  box-shadow: var(--shadow-sm);
  box-sizing: border-box;
}

/* En-t√™te : ic√¥ne + titre align√©s √† gauche, bouton √ó √† droite */
.widget-card__header {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  margin-bottom: var(--space-3);
}

/* Ic√¥ne de type widget (accent) */
.widget-card__icon {
  font-size: var(--text-base);
  color: var(--accent);
  line-height: 1;
  flex-shrink: 0;
}

/* Titre du widget */
.widget-card__title {
  flex: 1;
  min-width: 0;
  font-size: var(--text-sm);
  font-weight: var(--fw-semi);
  color: var(--text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/**
 * Bouton suppression √ó ‚Äî petit, discret, coin sup√©rieur droit du header.
 * Inline dans le header flex (pas de position absolute) pour rester
 * accessible et responsive.
 */
.widget-card__remove {
  width: 24px;
  height: 24px;
  border-radius: var(--radius-full);
  border: none;
  background: transparent;
  color: var(--text-disabled);
  font-size: var(--text-md);
  line-height: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  -webkit-tap-highlight-color: transparent;
  flex-shrink: 0;
  transition:
    background var(--duration-fast) var(--ease),
    color var(--duration-fast) var(--ease);
}

.widget-card__remove:hover {
  background: var(--danger-dim);
  color: var(--danger);
}

.widget-card__remove:active { opacity: 0.7; }

/* Zone de contenu variable selon le type de widget */
.widget-card__body {
  /* Pas de padding suppl√©mentaire : les sous-composants g√®rent leur propre espace */
}


/* ============================================================
   4. WIDGET BARRES HEBDOMADAIRES (.widget-bars)
   Mini bar chart des 8 derni√®res semaines
   ============================================================ */

/**
 * Conteneur flex row des barres, align√© en bas (bars croissantes vers le haut).
 * Hauteur fixe 80px pour toutes les barres √† l'int√©rieur.
 */
.widget-bars {
  display: flex;
  align-items: flex-end;
  gap: var(--space-1);
  height: 80px;
  width: 100%;
}

/**
 * Colonne d'une semaine : barre color√©e + label en dessous.
 * Flex column invers√© pour que la barre "pousse" vers le haut.
 */
.widget-bar {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-end;
  gap: 3px;
  height: 100%;
}

/**
 * Remplissage color√© de la barre.
 * La hauteur est d√©finie inline via JS (style="height: Xpx").
 * min-height garantit qu'une semaine √† 0 s√©ance reste visible.
 */
.widget-bar__fill {
  width: 100%;
  background: var(--accent-dim);
  border-radius: var(--radius-sm) var(--radius-sm) 2px 2px;
  min-height: 4px;
  transition: height var(--duration) var(--ease-out);
}

/* Label semaine (W1, W2‚Ä¶ ou "S42") sous la barre */
.widget-bar__label {
  font-size: 9px;
  font-weight: var(--fw-medium);
  color: var(--text-disabled);
  text-align: center;
  line-height: 1;
  white-space: nowrap;
  letter-spacing: 0.2px;
  flex-shrink: 0;
}

/* Semaine en cours : barre accent plein, label mis en valeur */
.widget-bar--current .widget-bar__fill {
  background: var(--accent);
  min-height: 8px;
}

.widget-bar--current .widget-bar__label {
  color: var(--accent);
  font-weight: var(--fw-bold);
}


/* ============================================================
   5. WIDGET STAT (.widget-stat)
   Grande valeur num√©rique + unit√© + label + sous-label
   ============================================================ */

/* Bloc centr√© pour un affichage "chiffre h√©ros" */
.widget-stat {
  text-align: center;
  padding: var(--space-1) 0;
}

/* La valeur principale : grand et gras */
.widget-stat__value {
  font-size: var(--text-2xl);
  font-weight: var(--fw-bold);
  color: var(--text);
  font-variant-numeric: tabular-nums;
  line-height: 1;
  display: inline;
}

/* Unit√© apr√®s la valeur (ex. "kcal", "kg", "cm") */
.widget-stat__unit {
  font-size: var(--text-md);
  font-weight: var(--fw-medium);
  color: var(--text-secondary);
  margin-left: 3px;
  display: inline;
}

/* Label descriptif sous la valeur */
.widget-stat__label {
  font-size: var(--text-sm);
  font-weight: var(--fw-medium);
  color: var(--text-secondary);
  margin-top: var(--space-1);
}

/* Sous-label optionnel : p√©riode, date, contexte */
.widget-stat__sub {
  font-size: var(--text-xs);
  color: var(--text-disabled);
  margin-top: 2px;
}


/* ============================================================
   6. WIDGET PROGRESSION EXERCICE (.widget-progress)
   Nom de l'exercice + meilleure s√©rie + historique mini
   ============================================================ */

/* Nom de l'exercice */
.widget-progress__exercise {
  font-size: var(--text-md);
  font-weight: var(--fw-semi);
  color: var(--text);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  margin-bottom: var(--space-1);
}

/* Meilleure s√©rie ("82.5 kg √ó 8") */
.widget-progress__best {
  font-size: var(--text-sm);
  font-weight: var(--fw-medium);
  color: var(--accent);
  font-variant-numeric: tabular-nums;
  margin-bottom: var(--space-3);
}

/**
 * Historique r√©cent : rang√©e de petits points ou pastilles color√©es
 * repr√©sentant les derni√®res sessions (JS injecte les dots).
 */
.widget-progress__history {
  display: flex;
  align-items: center;
  gap: var(--space-1);
  flex-wrap: wrap;
}

/* Pastille individuelle */
.widget-progress__dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: var(--accent-dim);
  border: 1px solid var(--accent);
  opacity: 0.5;
  flex-shrink: 0;
}

/* Pastille de la session la plus r√©cente */
.widget-progress__dot--latest {
  opacity: 1;
  background: var(--accent);
}

/* Pastille record personnel */
.widget-progress__dot--pr {
  opacity: 1;
  background: var(--warning);
  border-color: var(--warning);
}


/* ============================================================
   7. MODAL S√âLECTEUR DE WIDGET (.widget-picker)
   Bottom-sheet via .modal-overlay + .modal (layout.css)
   ============================================================ */

/* Liste des types de widgets disponibles */
.widget-picker__list {
  display: flex;
  flex-direction: column;
  gap: var(--space-1);
}

/**
 * Item de choix de widget ‚Äî flex row ic√¥ne + label.
 * M√™me motif que .row-item de components.css mais sans cursor pointer
 * sur le container (le click est g√©r√© globalement).
 */
.widget-picker__item {
  display: flex;
  align-items: center;
  gap: var(--space-3);
  padding: var(--space-3) var(--space-4);
  border-radius: var(--radius-md);
  background: var(--bg-elevated);
  border: 1px solid var(--border);
  cursor: pointer;
  -webkit-tap-highlight-color: transparent;
  transition:
    background var(--duration-fast) var(--ease),
    border-color var(--duration-fast) var(--ease);
  user-select: none;
}

.widget-picker__item:active {
  background: var(--accent-dim);
  border-color: var(--accent);
}

/* Ic√¥ne de type de widget */
.widget-picker__item-icon {
  width: 36px;
  height: 36px;
  border-radius: var(--radius-md);
  background: var(--accent-dim);
  color: var(--accent);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: var(--text-base);
  flex-shrink: 0;
}

/* Texte du type de widget */
.widget-picker__item-label {
  flex: 1;
  min-width: 0;
  font-size: var(--text-md);
  font-weight: var(--fw-medium);
  color: var(--text);
}

/* Sous-description optionnelle */
.widget-picker__item-sub {
  font-size: var(--text-xs);
  color: var(--text-secondary);
  margin-top: 2px;
}


/* ============================================================
   8. VUE PARAM√àTRES (.settings-page)
   Sections de r√©glages : profil, apparence, entra√Ænement, donn√©es
   ============================================================ */

.settings-page {
  display: flex;
  flex-direction: column;
}

/* Groupe de r√©glages (ex. "Apparence", "Entra√Ænement") */
.settings-section {
  margin-top: var(--space-5);
}

.settings-section:first-child {
  margin-top: 0;
}

/**
 * Titre de section ‚Äî identique √† .section-title / .dashboard__title.
 * Small caps, secondaire, lettres espac√©es.
 */
.settings-section__title {
  font-size: var(--text-xs);
  font-weight: var(--fw-semi);
  color: var(--text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.8px;
  margin-bottom: var(--space-2);
  padding-left: var(--space-1);
}

/**
 * Carte contenant les lignes de r√©glages.
 * M√™me style que .row-list de components.css.
 */
.settings-section .row-list {
  /* R√©utilise .row-list sans red√©finition */
}

/**
 * Ligne individuelle de r√©glage.
 * Flex row : label (+ sous-label) √† gauche, contr√¥le √† droite.
 * Pas de cursor pointer par d√©faut (variera selon le contr√¥le).
 */
.settings-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--space-4);
  padding: var(--space-4);
  border-bottom: 1px solid var(--border);
  background: var(--bg-surface);
}

.settings-row:last-child {
  border-bottom: none;
}

.settings-row:first-child {
  border-radius: var(--radius-lg) var(--radius-lg) 0 0;
}

.settings-row:last-child {
  border-radius: 0 0 var(--radius-lg) var(--radius-lg);
}

.settings-row:only-child {
  border-radius: var(--radius-lg);
}

/* Bloc texte gauche */
.settings-row__info {
  flex: 1;
  min-width: 0;
  display: flex;
  flex-direction: column;
  gap: 2px;
}

/* Nom du r√©glage */
.settings-row__label {
  font-size: var(--text-md);
  font-weight: var(--fw-medium);
  color: var(--text);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* Description optionnelle sous le nom */
.settings-row__sub {
  font-size: var(--text-xs);
  color: var(--text-secondary);
  line-height: 1.3;
}

/* Zone de contr√¥le √† droite (toggle, select, bouton, valeur) */
.settings-row__control {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  flex-shrink: 0;
}


/* ‚îÄ‚îÄ Toggle iOS (.settings-toggle) ‚îÄ‚îÄ */

/**
 * Toggle switch pur CSS, style iOS.
 * Wrapper inline-flex qui contient input cach√© + slider visuel.
 */
.settings-toggle {
  position: relative;
  display: inline-flex;
  align-items: center;
  width: 44px;
  height: 26px;
  flex-shrink: 0;
  cursor: pointer;
}

/* Checkbox cach√©e mais toujours accessible au clavier */
.settings-toggle__input {
  position: absolute;
  opacity: 0;
  width: 0;
  height: 0;
  pointer-events: none;
}

/**
 * Slider visuel ‚Äî pill arrondi qui contient le "thumb".
 * Le thumb est le pseudo-√©l√©ment ::after.
 */
.settings-toggle__slider {
  position: absolute;
  inset: 0;
  border-radius: var(--radius-full);
  background: var(--bg-elevated);
  border: 1px solid var(--border-strong);
  transition:
    background var(--duration-fast) var(--ease),
    border-color var(--duration-fast) var(--ease);
  cursor: pointer;
}

.settings-toggle__slider::after {
  content: '';
  position: absolute;
  top: 2px;
  left: 2px;
  width: 20px;
  height: 20px;
  border-radius: 50%;
  background: var(--text-disabled);
  transition:
    transform var(--duration-fast) var(--ease-spring),
    background var(--duration-fast) var(--ease);
}

/* √âtat ON */
.settings-toggle__input:checked ~ .settings-toggle__slider {
  background: var(--accent);
  border-color: var(--accent);
}

.settings-toggle__input:checked ~ .settings-toggle__slider::after {
  transform: translateX(18px);
  background: #fff;
}

/* Focus visible pour accessibilit√© clavier */
.settings-toggle__input:focus-visible ~ .settings-toggle__slider {
  outline: 2px solid var(--accent);
  outline-offset: 2px;
}


/* ‚îÄ‚îÄ Select param√®tre (.settings-select) ‚îÄ‚îÄ */

/**
 * Select styl√© coh√©rent avec .select de components.css,
 * mais compact pour s'int√©grer dans .settings-row__control.
 */
.settings-select {
  appearance: none;
  -webkit-appearance: none;
  background: var(--bg-input);
  border: 1px solid var(--border-strong);
  border-radius: var(--radius-md);
  padding: var(--space-2) var(--space-8) var(--space-2) var(--space-3);
  font-size: var(--text-sm);
  font-weight: var(--fw-medium);
  color: var(--text);
  cursor: pointer;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='10' height='6' viewBox='0 0 10 6'%3E%3Cpath d='M1 1l4 4 4-4' stroke='%23a0a8b8' stroke-width='1.5' fill='none' stroke-linecap='round'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right 10px center;
  max-width: 160px;
  min-width: 80px;
  transition: border-color var(--duration-fast) var(--ease);
}

.settings-select:focus {
  border-color: var(--accent);
  outline: none;
}


/* ‚îÄ‚îÄ Profil √©ditable (.settings-profile-edit) ‚îÄ‚îÄ */

/**
 * Carte d'√©dition de profil : pr√©visualisation avatar + champ nom.
 * Utilis√©e dans la section "Profil" des param√®tres.
 */
.settings-profile-edit {
  display: flex;
  align-items: center;
  gap: var(--space-4);
  padding: var(--space-4);
  background: var(--bg-surface);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  margin-bottom: var(--space-3);
}

/* Avatar miniature √©ditable (48px, r√©utilise le motif .profile-avatar) */
.settings-profile-edit__avatar {
  width: 48px;
  height: 48px;
  border-radius: 50%;
  background: var(--accent);
  color: #fff;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: var(--text-lg);
  font-weight: var(--fw-bold);
  flex-shrink: 0;
  cursor: pointer;
  transition: opacity var(--duration-fast) var(--ease);
  position: relative;
  overflow: hidden;
}

.settings-profile-edit__avatar:active { opacity: 0.8; }

/* Overlay "Modifier" au hover */
.settings-profile-edit__avatar::after {
  content: 'Modifier';
  position: absolute;
  inset: 0;
  background: rgba(0, 0, 0, 0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 9px;
  font-weight: var(--fw-semi);
  opacity: 0;
  transition: opacity var(--duration-fast) var(--ease);
  border-radius: 50%;
}

.settings-profile-edit__avatar:hover::after { opacity: 1; }

/* Champ nom √©ditable dans la carte profil */
.settings-profile-edit__fields {
  flex: 1;
  min-width: 0;
  display: flex;
  flex-direction: column;
  gap: var(--space-2);
}

.settings-profile-edit__label {
  font-size: var(--text-xs);
  font-weight: var(--fw-semi);
  color: var(--text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.settings-profile-edit__input {
  width: 100%;
  background: var(--bg-input);
  border: 1px solid var(--border-strong);
  border-radius: var(--radius-md);
  padding: var(--space-2) var(--space-3);
  font-size: var(--text-md);
  font-weight: var(--fw-medium);
  color: var(--text);
  box-sizing: border-box;
  transition: border-color var(--duration-fast) var(--ease);
}

.settings-profile-edit__input::placeholder { color: var(--text-disabled); }

.settings-profile-edit__input:focus {
  border-color: var(--accent);
  outline: none;
}


/* ‚îÄ‚îÄ Valeur courante affich√©e dans la ligne de r√©glage ‚îÄ‚îÄ */

/* Valeur textuelle √† droite (ex. "Fran√ßais", "kg", "Sombre") */
.settings-row__value {
  font-size: var(--text-sm);
  font-weight: var(--fw-medium);
  color: var(--text-secondary);
  white-space: nowrap;
}

/* Chevron de navigation (ligne cliquable qui ouvre une sous-vue) */
.settings-row__chevron {
  font-size: var(--text-sm);
  color: var(--text-disabled);
}


/* ============================================================
   9. DESKTOP (>= 680px)
   ============================================================ */

@media (min-width: 680px) {
  /* En-t√™te profil plus spacieux */
  .profile-header {
    padding: var(--space-8) var(--space-6) var(--space-6);
    border-radius: var(--radius-xl);
  }

  .profile-avatar {
    width: 80px;
    height: 80px;
    font-size: var(--text-2xl);
  }

  .profile-name {
    font-size: var(--text-2xl);
  }

  /* Widget cards : bord gauche l√©g√®rement plus √©pais */
  .widget-card {
    border-radius: var(--radius-lg);
    border-left-width: 4px;
    padding: var(--space-4) var(--space-5);
  }

  /* Stat widget plus grande valeur */
  .widget-stat__value {
    font-size: var(--text-3xl);
  }

  /* Barres plus hautes */
  .widget-bars {
    height: 100px;
  }

  /* Settings rows l√©g√®rement plus spacieuses */
  .settings-row {
    padding: var(--space-4) var(--space-5);
  }

  /* Select param√®tre l√©g√®rement plus large */
  .settings-select {
    max-width: 200px;
  }
}
